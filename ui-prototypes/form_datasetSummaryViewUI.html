<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataset Library</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.5;
            margin: 0;
            padding: 20px;
            background: #f0f2f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .library-header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .library-stats {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
        }
        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(650px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .dataset-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .card-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card-content {
            padding: 15px;
        }
        .timeline-container {
            position: relative;
            margin: 20px 0;
            padding-top: 20px;
        }
        .events-track {
            position: relative;
            height: 25px;
            margin-bottom: 5px;
        }
        .hour-markers {
            position: relative;
            height: 20px;
            border-top: 2px solid #eee;
        }
        .hour-mark {
            position: absolute;
            width: 1px;
            height: 8px;
            background: #ccc;
            top: 0;
        }
        .hour-label {
            position: absolute;
            top: 10px;
            transform: translateX(-50%);
            font-size: 11px;
            color: #666;
        }
        .event-block {
            position: absolute;
            height: 18px;
            border-radius: 2px;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .metric-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .metric-value {
            font-weight: bold;
            color: #007bff;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        .legend {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            font-size: 12px;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .legend-color {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }
        .views-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
</head>
<body style="border: 5px solid #007bff; margin: 10px; padding: 20px; border-radius: 10px;">
    <div class="container">
        <!-- Library Header -->
        <div class="library-header">
            <div class="header-content">
                <h1>Dataset Library</h1>
                <button class="btn">Add New Dataset</button>
            </div>
            <div class="library-stats">
                <span>3 Datasets</span>
                <span>•</span>
                <span>285,155 Total Samples</span>
                <span>•</span>
                <span>Last updated: Today 10:30</span>
            </div>
        </div>

        <!-- Dataset Collection -->
        <div class="collection-grid">
            <!-- Dataset Card Example -->
            <div class="dataset-card" style="border: 2px solid #28a745; border-radius: 8px;">
                <div class="card-header">
                    <div>
                        <h3 style="margin: 0">Marine Mammal Dataset 2024-12-13</h3>
                        <div style="color: #666; font-size: 0.9em">5.5 hours @ 5 Hz</div>
                    </div>
                    <div>
                        <button class="btn">View Details</button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-value">99,925</div>
                            <div>Samples</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">51</div>
                            <div>Events</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">39.46m</div>
                            <div>Max Depth</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">13.23°C</div>
                            <div>Avg Temp</div>
                        </div>
                    </div>

                    <div class="timeline-container">
                        <div class="events-track" id="eventsTrack1"></div>
                        <div class="hour-markers" id="hourMarkers1"></div>
                    </div>

                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #4CAF50"></div>
                            <span>Exploratory dives (14)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #2196F3"></div>
                            <span>Side rolls (12)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FFC107"></div>
                            <span>Kick feeding (7)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #9C27B0"></div>
                            <span>Noodle feeding (7)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FF5722"></div>
                            <span>Feeding loop (5)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional dataset cards would go here -->
        </div>

        <!-- Database Views Diagram -->

<div style="display: flex; justify-content: space-between; gap: 20px;">
    <div class="views-diagram" style="flex: 1; border: 2px solid #007bff; border-radius: 8px; padding: 15px;">
        <h2 style="color: #007bff;">Dataset Summary View</h2>
        <div class="mermaid">
            graph LR
            subgraph DatasetSummary_View["Dataset Summary"]
                DD[DATASET_DETAILS]
                AN[ANNOTATIONS]
                DM[DERIVED_METRICS]
                DD -->|Includes dataset metadata| AN
                DD -->|Provides dataset metrics| DM
                DD & AN & DM -->|Aggregated into| DSV[DatasetSummary View]
            end
        </div>
    </div>
    <div class="views-diagram" style="flex: 1; border: 2px solid #28a745; border-radius: 8px; padding: 15px;">
        <h2 style="color: #28a745;">Dive Classification Summary View</h2>
        <div class="mermaid">
            graph LR
            subgraph DiveClassificationSummary_View["Dive Classification Summary"]
                DS[DIVE_STATS]
                ML[ML_CLASSIFICATIONS]
                DS -->|Contains dive statistics| ML
                DS & ML -->|Aggregated into| DCS[DiveClassificationSummary View]
            end
        </div>
    </div>
</div>

    <script>
        // Initialize Mermaid and create timeline (same as before)
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({ 
                startOnLoad: true,
                theme: 'default',
                securityLevel: 'loose'
            });

            function createTimeline(containerId, trackId, totalHours) {
                const hoursContainer = document.getElementById(containerId);
                const eventsTrack = document.getElementById(trackId);
                
                for (let i = 0; i <= totalHours; i++) {
                    const marker = document.createElement('div');
                    marker.className = 'hour-mark';
                    marker.style.left = `${(i / totalHours) * 100}%`;
                    
                    const label = document.createElement('div');
                    label.className = 'hour-label';
                    label.textContent = `${i}h`;
                    label.style.left = `${(i / totalHours) * 100}%`;
                    
                    hoursContainer.appendChild(marker);
                    hoursContainer.appendChild(label);
                }

                const events = [
                    { start: 0.2, duration: 15, type: 'exploratory' },
                    { start: 0.8, duration: 10, type: 'side-rolls' },
                    { start: 1.3, duration: 12, type: 'kick-feeding' },
                    { start: 1.8, duration: 15, type: 'exploratory' },
                    { start: 2.4, duration: 8, type: 'noodle-feeding' }
                ];

                const colors = {
                    'exploratory': '#4CAF50',
                    'side-rolls': '#2196F3',
                    'kick-feeding': '#FFC107',
                    'noodle-feeding': '#9C27B0',
                    'feeding-loop': '#FF5722'
                };

                events.forEach(event => {
                    const block = document.createElement('div');
                    block.className = 'event-block';
                    block.style.left = `${(event.start / totalHours) * 100}%`;
                    block.style.width = `${(event.duration / 60) * (100 / totalHours)}%`;
                    block.style.backgroundColor = colors[event.type];
                    eventsTrack.appendChild(block);
                });
            }

            createTimeline('hourMarkers1', 'eventsTrack1', 5.5);
        });
    </script>
</body>
</html>


